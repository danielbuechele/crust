import clsx from "clsx";
import styles from "./PrimaryButton.module.css";
import Link from "next/link";

export default function PrimaryButton(props: {
  href: string;
  disabled?: boolean;
  className?: string;
  variant?: "light" | "dark";
  width?: number;
  loading?: boolean;
  children: React.ReactNode;
}) {
  return (
    <Link
      href={props.disabled || props.loading ? "" : (props.href ?? "")}
      style={{ width: props.width ?? 128 }}
      className={clsx(
        props.className,
        styles.button,
        props.variant === "dark" ? styles.dark : undefined,
        props.disabled ? styles.disabled : undefined
      )}
    >
      {props.loading ? (
        <svg
          width="19"
          height="19"
          viewBox="0 0 19 19"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className={styles.loading}
        >
          <path
            d="M8.94922 18.8389C8.7207 18.8389 8.52734 18.7744 8.36914 18.6455C8.21094 18.5225 8.10547 18.3467 8.05273 18.1182L7.5957 16.1846C7.42578 16.126 7.25879 16.0645 7.09473 16C6.93066 15.9355 6.77539 15.8682 6.62891 15.7979L4.94141 16.835C4.74805 16.9521 4.54883 17.002 4.34375 16.9844C4.14453 16.9668 3.96582 16.8789 3.80762 16.7207L2.68262 15.5957C2.52441 15.4375 2.43359 15.2529 2.41016 15.042C2.39258 14.8311 2.44824 14.6318 2.57715 14.4443L3.60547 12.7656C3.53516 12.6133 3.46777 12.458 3.40332 12.2998C3.33887 12.1416 3.2832 11.9834 3.23633 11.8252L1.28516 11.3594C1.05664 11.3125 0.880859 11.21 0.757812 11.0518C0.634766 10.8936 0.573242 10.7002 0.573242 10.4717V8.88086C0.573242 8.6582 0.634766 8.46777 0.757812 8.30957C0.880859 8.15137 1.05664 8.04883 1.28516 8.00195L3.21875 7.53613C3.27148 7.35449 3.33008 7.18457 3.39453 7.02637C3.46484 6.86816 3.5293 6.71875 3.58789 6.57812L2.55957 4.87305C2.43066 4.68555 2.375 4.49219 2.39258 4.29297C2.41016 4.08789 2.50098 3.90625 2.66504 3.74805L3.80762 2.61426C3.97168 2.46191 4.14746 2.37402 4.33496 2.35059C4.52832 2.32715 4.72168 2.37109 4.91504 2.48242L6.62012 3.53711C6.7666 3.46094 6.92188 3.39062 7.08594 3.32617C7.25586 3.25586 7.42578 3.19141 7.5957 3.13281L8.05273 1.19043C8.10547 0.967773 8.21094 0.791992 8.36914 0.663086C8.52734 0.53418 8.7207 0.469727 8.94922 0.469727H10.5664C10.7949 0.469727 10.9883 0.53418 11.1465 0.663086C11.3047 0.791992 11.4072 0.967773 11.4541 1.19043L11.9111 3.15039C12.0928 3.20898 12.2627 3.27051 12.4209 3.33496C12.585 3.39941 12.7373 3.46973 12.8779 3.5459L14.6006 2.48242C14.7939 2.37109 14.9844 2.33008 15.1719 2.35938C15.3594 2.38281 15.5352 2.46777 15.6992 2.61426L16.8506 3.74805C17.0146 3.90625 17.1025 4.08789 17.1143 4.29297C17.1318 4.49219 17.0791 4.68555 16.9561 4.87305L15.9189 6.57812C15.9775 6.71875 16.0391 6.86816 16.1035 7.02637C16.1738 7.18457 16.2383 7.35449 16.2969 7.53613L18.2305 8.00195C18.4531 8.04883 18.626 8.15137 18.749 8.30957C18.8779 8.46777 18.9424 8.6582 18.9424 8.88086V10.4717C18.9424 10.7002 18.8779 10.8936 18.749 11.0518C18.626 11.21 18.4531 11.3125 18.2305 11.3594L16.2793 11.8252C16.2266 11.9834 16.168 12.1416 16.1035 12.2998C16.0449 12.458 15.9775 12.6133 15.9014 12.7656L16.9385 14.4443C17.0674 14.6318 17.1201 14.8311 17.0967 15.042C17.0791 15.2529 16.9912 15.4375 16.833 15.5957L15.6992 16.7207C15.541 16.8789 15.3594 16.9668 15.1543 16.9844C14.9551 17.002 14.7617 16.9521 14.5742 16.835L12.8779 15.7979C12.7314 15.8682 12.5762 15.9355 12.4121 16C12.248 16.0645 12.0811 16.126 11.9111 16.1846L11.4541 18.1182C11.4072 18.3467 11.3047 18.5225 11.1465 18.6455C10.9883 18.7744 10.7949 18.8389 10.5664 18.8389H8.94922ZM9.75781 12.7568C10.3262 12.7568 10.8447 12.6162 11.3135 12.335C11.7881 12.0537 12.1631 11.6787 12.4385 11.21C12.7197 10.7354 12.8604 10.2139 12.8604 9.64551C12.8604 9.07715 12.7197 8.56152 12.4385 8.09863C12.1631 7.62988 11.7881 7.25488 11.3135 6.97363C10.8447 6.69238 10.3262 6.55176 9.75781 6.55176C9.18945 6.55176 8.6709 6.69238 8.20215 6.97363C7.7334 7.25488 7.3584 7.62988 7.07715 8.09863C6.7959 8.56152 6.65527 9.07715 6.65527 9.64551C6.65527 10.2139 6.79297 10.7354 7.06836 11.21C7.34961 11.6787 7.72461 12.0537 8.19336 12.335C8.66797 12.6162 9.18945 12.7568 9.75781 12.7568Z"
            fill="white"
          />
        </svg>
      ) : (
        <>
          {props.children}
          <div className={styles.icon}>
            <svg
              width="12"
              height="11"
              viewBox="0 0 12 11"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M6.39205 10.6023L5.36932 9.59091L8.92045 6.03977H0V4.5625H8.92045L5.36932 1.01705L6.39205 0L11.6932 5.30114L6.39205 10.6023Z"
                fill="white"
              />
            </svg>
          </div>
        </>
      )}
    </Link>
  );
}
